[gd_scene load_steps=36 format=3 uid="uid://r0rlptslyw58"]

[ext_resource type="Script" uid="uid://kygkbg3kqosp" path="res://src/player/player_character_controller.gd" id="1_nsxo0"]
[ext_resource type="Script" uid="uid://5i4gw4mikjjm" path="res://src/navmesh.gd" id="2_0ak11"]
[ext_resource type="TileSet" uid="uid://crffpbfvta0hh" path="res://assets/terrain_tileset.tres" id="2_isiae"]
[ext_resource type="Script" uid="uid://cyjt8uhdv01dp" path="res://src/player/follow_camera.gd" id="2_ure5g"]
[ext_resource type="PackedScene" uid="uid://cmubnd2oc4lex" path="res://characters/Goblin.tscn" id="3_d8tm3"]
[ext_resource type="Script" uid="uid://patkktgw1bbd" path="res://terrain.gd" id="4_cnrih"]
[ext_resource type="PackedScene" uid="uid://ykf6nsdak0fj" path="res://items/Diamond.tscn" id="4_d8tm3"]
[ext_resource type="Script" uid="uid://ctqjnf2yg1uvt" path="res://src/items/item_data.gd" id="6_cnrih"]
[ext_resource type="Script" uid="uid://dmp2din0planr" path="res://src/characters/ai/aggressive_ai.gd" id="7_1v8wj"]
[ext_resource type="PackedScene" uid="uid://d3u6nyytl22wp" path="res://items/containers/Bucket.tscn" id="8_isiae"]
[ext_resource type="Resource" uid="uid://bhfxa754v7msh" path="res://items/Diamond.tres" id="9_5n4mp"]
[ext_resource type="PackedScene" uid="uid://c1ejvgyrv6nmb" path="res://items/containers/BucketUI.tscn" id="9_isiae"]
[ext_resource type="Texture2D" uid="uid://dkrq5othh4xcw" path="res://assets/containers.png" id="13_0ak11"]
[ext_resource type="PackedScene" uid="uid://dvwyd2tet2qr5" path="res://items/containers/Carton.tscn" id="14_m8l71"]
[ext_resource type="Script" uid="uid://d4mgxpys1m80c" path="res://src/player/container_ui.gd" id="15_w2phg"]
[ext_resource type="Texture2D" uid="uid://cdlafytbjx7lg" path="res://assets/bag slot.png" id="16_cx5mk"]
[ext_resource type="Script" uid="uid://bqtvaidnp5b3q" path="res://src/player/container_ui_slot.gd" id="17_1v8wj"]
[ext_resource type="PackedScene" uid="uid://cpyhtok5on2tr" path="res://items/containers/Backpack.tscn" id="18_1v8wj"]
[ext_resource type="PackedScene" uid="uid://cxr24qd1d0l3m" path="res://items/containers/BackpackUI.tscn" id="19_1v8wj"]
[ext_resource type="PackedScene" uid="uid://cirkhmxhfm3hn" path="res://items/Torch.tscn" id="20_u0lc2"]
[ext_resource type="Texture2D" uid="uid://b656w8clmgsyk" path="res://assets/items.png" id="21_5n4mp"]

[sub_resource type="NavigationPolygon" id="NavigationPolygon_4qov3"]
source_geometry_mode = 1
source_geometry_group_name = &"navmesh_sources"
agent_radius = 8.0

[sub_resource type="NavigationPolygon" id="NavigationPolygon_y6jnv"]
source_geometry_mode = 1
source_geometry_group_name = &"navmesh_sources"
agent_radius = 16.0

[sub_resource type="NavigationPolygon" id="NavigationPolygon_ure5g"]
source_geometry_mode = 1
source_geometry_group_name = &"navmesh_sources"
agent_radius = 32.0

[sub_resource type="AtlasTexture" id="AtlasTexture_l2qbg"]
atlas = ExtResource("13_0ak11")
region = Rect2(0, 0, 16, 16)

[sub_resource type="Resource" id="Resource_cwmej"]
resource_local_to_scene = true
script = ExtResource("6_cnrih")
display_name = "Bucket"
description = "What a nice bucket"
ui_sprite = SubResource("AtlasTexture_l2qbg")
world_scene = ExtResource("8_isiae")
is_container = true
ui_scene = ExtResource("9_isiae")
metadata/_custom_type_script = "uid://ctqjnf2yg1uvt"

[sub_resource type="AtlasTexture" id="AtlasTexture_4yo1c"]
atlas = ExtResource("16_cx5mk")
region = Rect2(0, 0, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_rkvuq"]
atlas = ExtResource("16_cx5mk")
region = Rect2(32, 0, 32, 32)

[sub_resource type="PackedScene" id="PackedScene_gxenx"]
_bundled = {
"conn_count": 0,
"conns": PackedInt32Array(),
"editable_instances": [],
"names": PackedStringArray("CartonUI", "Control", "texture_filter", "layout_mode", "anchors_preset", "anchor_right", "anchor_bottom", "offset_right", "offset_bottom", "grow_horizontal", "grow_vertical", "script", "Slot 1", "TextureButton", "layout_mode", "offset_right", "offset_bottom", "texture_normal", "texture_hover", "script", "metadata/_custom_type_script", "Item", "TextureRect", "layout_mode", "offset_left", "offset_top", "offset_right", "offset_bottom", "expand_mode", "stretch_mode", "Slot 2", "TextureButton", "layout_mode", "offset_left", "offset_right", "offset_bottom", "texture_normal", "texture_hover", "script", "metadata/_custom_type_script", "Item", "TextureRect", "layout_mode", "offset_left", "offset_top", "offset_right", "offset_bottom", "expand_mode", "stretch_mode", "Slot 3", "TextureButton", "layout_mode", "offset_top", "offset_right", "offset_bottom", "texture_normal", "texture_hover", "script", "metadata/_custom_type_script", "Item", "TextureRect", "layout_mode", "offset_left", "offset_top", "offset_right", "offset_bottom", "expand_mode", "stretch_mode", "Slot 4", "TextureButton", "layout_mode", "offset_left", "offset_top", "offset_right", "offset_bottom", "texture_normal", "texture_hover", "script", "metadata/_custom_type_script", "Item", "TextureRect", "layout_mode", "offset_left", "offset_top", "offset_right", "offset_bottom", "expand_mode", "stretch_mode"),
"node_count": 9,
"node_paths": [NodePath("."), NodePath("./Slot 1"), NodePath("."), NodePath("./Slot 2"), NodePath("."), NodePath("./Slot 3"), NodePath("."), NodePath("./Slot 4")],
"nodes": PackedInt32Array(-1, -1, 1, 0, -1, 10, 2, 0, 3, 1, 4, 2, 5, 3, 6, 4, 7, 5, 8, 6, 9, 7, 10, 8, 11, 9, 0, 1073741824, 0, 13, 12, -1, 7, 14, 10, 15, 11, 16, 12, 17, 13, 18, 14, 19, 15, 20, 16, 0, 1073741825, 0, 22, 21, -1, 7, 23, 17, 24, 18, 25, 19, 26, 20, 27, 21, 28, 22, 29, 23, 0, 1073741826, 0, 31, 30, -1, 8, 32, 24, 33, 25, 34, 26, 35, 27, 36, 28, 37, 29, 38, 30, 39, 31, 0, 1073741827, 0, 41, 40, -1, 7, 42, 32, 43, 33, 44, 34, 45, 35, 46, 36, 47, 37, 48, 38, 0, 1073741828, 0, 50, 49, -1, 8, 51, 39, 52, 40, 53, 41, 54, 42, 55, 43, 56, 44, 57, 45, 58, 46, 0, 1073741829, 0, 60, 59, -1, 7, 61, 47, 62, 48, 63, 49, 64, 50, 65, 51, 66, 52, 67, 53, 0, 1073741830, 0, 69, 68, -1, 9, 70, 54, 71, 55, 72, 56, 73, 57, 74, 58, 75, 59, 76, 60, 77, 61, 78, 62, 0, 1073741831, 0, 80, 79, -1, 7, 81, 63, 82, 64, 83, 65, 84, 66, 85, 67, 86, 68, 87, 69, 0),
"variants": [1, 3, 15, 1.0, 1.0, -1553.0, -790.0, 2, 2, ExtResource("15_w2phg"), 0, 32.0, 32.0, SubResource("AtlasTexture_4yo1c"), SubResource("AtlasTexture_rkvuq"), ExtResource("17_1v8wj"), "uid://bqtvaidnp5b3q", 0, 8.0, 8.0, 24.0, 24.0, 3, 5, 0, 32.0, 64.0, 32.0, SubResource("AtlasTexture_4yo1c"), SubResource("AtlasTexture_rkvuq"), ExtResource("17_1v8wj"), "uid://bqtvaidnp5b3q", 0, 8.0, 8.0, 24.0, 24.0, 3, 5, 0, 32.0, 32.0, 64.0, SubResource("AtlasTexture_4yo1c"), SubResource("AtlasTexture_rkvuq"), ExtResource("17_1v8wj"), "uid://bqtvaidnp5b3q", 0, 8.0, 8.0, 24.0, 24.0, 3, 5, 0, 32.0, 32.0, 64.0, 64.0, SubResource("AtlasTexture_4yo1c"), SubResource("AtlasTexture_rkvuq"), ExtResource("17_1v8wj"), "uid://bqtvaidnp5b3q", 0, 8.0, 8.0, 24.0, 24.0, 3, 5],
"version": 3
}

[sub_resource type="AtlasTexture" id="AtlasTexture_cwmej"]
atlas = ExtResource("13_0ak11")
region = Rect2(17, 0, 16, 16)

[sub_resource type="Resource" id="Resource_2pp7j"]
resource_local_to_scene = true
script = ExtResource("6_cnrih")
display_name = "Carton"
description = "What a nice carton"
ui_sprite = SubResource("AtlasTexture_cwmej")
world_scene = ExtResource("14_m8l71")
is_container = true
ui_scene = SubResource("PackedScene_gxenx")
metadata/_custom_type_script = "uid://ctqjnf2yg1uvt"

[sub_resource type="AtlasTexture" id="AtlasTexture_f1q7j"]
resource_local_to_scene = true
atlas = ExtResource("13_0ak11")
region = Rect2(0, 17, 16, 16)

[sub_resource type="Resource" id="Resource_wc23j"]
resource_local_to_scene = true
script = ExtResource("6_cnrih")
display_name = "Bucket"
description = "What a nice bucket"
ui_sprite = SubResource("AtlasTexture_f1q7j")
world_scene = ExtResource("18_1v8wj")
is_container = true
capacity = 9
ui_scene = ExtResource("19_1v8wj")
metadata/_custom_type_script = "uid://ctqjnf2yg1uvt"

[sub_resource type="AtlasTexture" id="AtlasTexture_yh1pe"]
atlas = ExtResource("21_5n4mp")
region = Rect2(0, 0, 16, 16)

[sub_resource type="Resource" id="Resource_82nro"]
resource_local_to_scene = true
script = ExtResource("6_cnrih")
display_name = "Torch"
description = "So bright"
ui_sprite = SubResource("AtlasTexture_yh1pe")
world_scene = ExtResource("20_u0lc2")
metadata/_custom_type_script = "uid://ctqjnf2yg1uvt"

[node name="TestDungeon" type="Node"]

[node name="PlayerCharacterController" type="Node" parent="." node_paths=PackedStringArray("character")]
script = ExtResource("1_nsxo0")
character = NodePath("../World/PlayerGoblin")
metadata/_custom_type_script = "uid://kygkbg3kqosp"

[node name="World" type="Node2D" parent="."]
texture_filter = 1

[node name="FollowCamera" type="Camera2D" parent="World" node_paths=PackedStringArray("target")]
zoom = Vector2(4, 4)
script = ExtResource("2_ure5g")
target = NodePath("../PlayerGoblin")
metadata/_custom_type_script = "uid://cyjt8uhdv01dp"

[node name="NavMeshSmall" type="NavigationRegion2D" parent="World" node_paths=PackedStringArray("map")]
navigation_polygon = SubResource("NavigationPolygon_4qov3")
script = ExtResource("2_0ak11")
map = NodePath("../Terrain")
metadata/_custom_type_script = "uid://5i4gw4mikjjm"

[node name="NavMeshMedium" type="NavigationRegion2D" parent="World" node_paths=PackedStringArray("map")]
navigation_polygon = SubResource("NavigationPolygon_y6jnv")
navigation_layers = 2
script = ExtResource("2_0ak11")
map = NodePath("../Terrain")
metadata/_custom_type_script = "uid://5i4gw4mikjjm"

[node name="NavMeshLarge" type="NavigationRegion2D" parent="World" node_paths=PackedStringArray("map")]
navigation_polygon = SubResource("NavigationPolygon_ure5g")
navigation_layers = 4
script = ExtResource("2_0ak11")
map = NodePath("../Terrain")
metadata/_custom_type_script = "uid://5i4gw4mikjjm"

[node name="Terrain" type="TileMapLayer" parent="World" groups=["navmesh_sources"]]
texture_filter = 1
tile_map_data = PackedByteArray(0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1, 0, 0, 0, 1, 0, 0, 0)
tile_set = ExtResource("2_isiae")
script = ExtResource("4_cnrih")
WORLD_RADIUS = 20
ROOM_DIM_RANGE = 5

[node name="PlayerGoblin" parent="World" instance=ExtResource("3_d8tm3")]
position = Vector2(64, 64)

[node name="AIGoblin" parent="World" instance=ExtResource("3_d8tm3")]
position = Vector2(176, 202)
move_speed = 110.0

[node name="AggressiveAI" type="Node" parent="World/AIGoblin" node_paths=PackedStringArray("map")]
script = ExtResource("7_1v8wj")
map = NodePath("../../Terrain")
metadata/_custom_type_script = "uid://dmp2din0planr"

[node name="Diamond" parent="World" instance=ExtResource("4_d8tm3")]
position = Vector2(23.999989, 174)
rotation = 0.41302407
item_data = ExtResource("9_5n4mp")

[node name="Diamond2" parent="World" instance=ExtResource("4_d8tm3")]
position = Vector2(98, 157.00002)
rotation = 0.41302407
item_data = ExtResource("9_5n4mp")

[node name="Diamond3" parent="World" instance=ExtResource("4_d8tm3")]
position = Vector2(25.999998, 232.00003)
rotation = 0.41302407
item_data = ExtResource("9_5n4mp")

[node name="Diamond4" parent="World" instance=ExtResource("4_d8tm3")]
position = Vector2(46, 154.00002)
rotation = 0.41302407
item_data = ExtResource("9_5n4mp")

[node name="Bucket" parent="World" instance=ExtResource("8_isiae")]
texture_filter = 1
position = Vector2(95.99988, 217.99988)
rotation = -0.38087726
item_data = SubResource("Resource_cwmej")

[node name="Carton" parent="World" instance=ExtResource("14_m8l71")]
position = Vector2(55, 229)
item_data = SubResource("Resource_2pp7j")

[node name="Backpack" parent="World" instance=ExtResource("18_1v8wj")]
position = Vector2(-47, 233)
item_data = SubResource("Resource_wc23j")

[node name="CanvasModulate" type="CanvasModulate" parent="World"]
color = Color(0.0672, 0.06826667, 0.08, 1)

[node name="Torch" parent="World" instance=ExtResource("20_u0lc2")]
position = Vector2(-63, 85)
item_data = SubResource("Resource_82nro")

[node name="UI" type="Control" parent="."]
layout_mode = 3
anchors_preset = 5
anchor_left = 0.5
anchor_right = 0.5
offset_left = -20.0
offset_right = 20.0
offset_bottom = 40.0
grow_horizontal = 2
